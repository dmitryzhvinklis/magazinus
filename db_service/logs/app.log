{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:15:41.646+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND table_type = 'BASE TABLE' [rows: 1]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:15:41.774+0300","caller":"database/database.go:68","msg":"SQL Trace: CREATE TABLE \"users\" (\"id\" bigserial,\"created_at\" timestamptz,\"updated_at\" timestamptz,\"deleted_at\" timestamptz,\"username\" varchar(100) NOT NULL,\"email\" varchar(100) NOT NULL,\"password_hash\" varchar(255) NOT NULL,\"first_name\" varchar(100),\"last_name\" varchar(100),PRIMARY KEY (\"id\"),CONSTRAINT \"uni_users_email\" UNIQUE (\"email\"),CONSTRAINT \"uni_users_username\" UNIQUE (\"username\")) [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:15:41.815+0300","caller":"database/database.go:68","msg":"SQL Trace: CREATE INDEX IF NOT EXISTS \"idx_users_deleted_at\" ON \"users\" (\"deleted_at\") [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:15:41.815+0300","caller":"database/database.go:97","msg":"Connected to the database successfully"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:15:41.815+0300","caller":"database/main.go:21","msg":"Database service is running"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.048+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND table_type = 'BASE TABLE' [rows: 1]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.048+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT CURRENT_DATABASE() [rows: 1]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.054+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT c.column_name, c.is_nullable = 'YES', c.udt_name, c.character_maximum_length, c.numeric_precision, c.numeric_precision_radix, c.numeric_scale, c.datetime_precision, 8 * typlen, c.column_default, pd.description, c.identity_increment FROM information_schema.columns AS c JOIN pg_type AS pgt ON c.udt_name = pgt.typname LEFT JOIN pg_catalog.pg_description as pd ON pd.objsubid = c.ordinal_position AND pd.objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = c.table_name AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = c.table_schema)) where table_catalog = 'magazinus' AND table_schema = CURRENT_SCHEMA() AND table_name = 'users' [rows: -1]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.055+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT * FROM \"users\" LIMIT 5 [rows: -1]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.060+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT constraint_name FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'magazinus' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'users' AND constraint_type = 'UNIQUE' [rows: -1]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.063+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT c.column_name, constraint_name, constraint_type FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'magazinus' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'users' [rows: -1]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.064+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT a.attname as column_name, format_type(a.atttypid, a.atttypmod) AS data_type\n\t\tFROM pg_attribute a JOIN pg_class b ON a.attrelid = b.oid AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())\n\t\tWHERE a.attnum > 0 -- hide internal columns\n\t\tAND NOT a.attisdropped -- hide deleted columns\n\t\tAND b.relname = 'users' [rows: -1]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.065+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())) [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.066+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'created_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())) [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.067+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'updated_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())) [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.068+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'deleted_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())) [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.069+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'username') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())) [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.070+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'email') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())) [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.070+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'password_hash') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())) [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.070+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'first_name') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())) [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.070+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'last_name') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())) [rows: 0]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.071+0300","caller":"database/database.go:68","msg":"SQL Trace: SELECT count(*) FROM pg_indexes WHERE tablename = 'users' AND indexname = 'idx_users_deleted_at' AND schemaname = CURRENT_SCHEMA() [rows: 1]"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.071+0300","caller":"database/database.go:97","msg":"Connected to the database successfully"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T01:22:23.071+0300","caller":"database/main.go:21","msg":"Database service is running"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-06T22:30:51.067Z","caller":"database/main.go:21","msg":"Запуск приложения..."}
{"level":"\u001b[31mERROR\u001b[0m","ts":"2024-08-06T22:30:51.068Z","caller":"database/database.go:60","msg":"failed to initialize database, got error failed to connect to `host=localhost user=postgres database=magazinus`: dial error (dial tcp [::1]:5432: connect: cannot assign requested address)"}
{"level":"\u001b[31mFATAL\u001b[0m","ts":"2024-08-06T22:30:51.068Z","caller":"database/main.go:27","msg":"Не удалось подключиться к базе данных","error":"failed to connect to `host=localhost user=postgres database=magazinus`: dial error (dial tcp [::1]:5432: connect: cannot assign requested address)"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-06T22:33:28.726Z","caller":"database/main.go:21","msg":"Запуск приложения..."}
{"level":"\u001b[31mERROR\u001b[0m","ts":"2024-08-06T22:33:28.727Z","caller":"database/database.go:60","msg":"failed to initialize database, got error failed to connect to `host=localhost user=postgres database=magazinus`: dial error (dial tcp [::1]:5432: connect: cannot assign requested address)"}
{"level":"\u001b[31mFATAL\u001b[0m","ts":"2024-08-06T22:33:28.727Z","caller":"database/main.go:27","msg":"Не удалось подключиться к базе данных","error":"failed to connect to `host=localhost user=postgres database=magazinus`: dial error (dial tcp [::1]:5432: connect: cannot assign requested address)"}
{"level":"\u001b[34mINFO\u001b[0m","ts":"2024-08-07T19:16:22.605+0300","caller":"database/main.go:20","msg":"Запуск приложения..."}
{"level":"\u001b[31mERROR\u001b[0m","ts":"2024-08-07T19:16:22.609+0300","caller":"database/database.go:83","msg":"failed to initialize database, got error failed to connect to `host=db user=user database=magazinus`: hostname resolving error (lookup db on 127.0.0.53:53: server misbehaving)"}
{"level":"\u001b[31mFATAL\u001b[0m","ts":"2024-08-07T19:16:22.609+0300","caller":"database/main.go:24","msg":"Не удалось подключиться к базе данных","error":"failed to connect to `host=db user=user database=magazinus`: hostname resolving error (lookup db on 127.0.0.53:53: server misbehaving)"}
